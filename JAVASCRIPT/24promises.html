<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            color: rgb(54, 96, 134);

        }
    </style>
</head>

<body>
    <h1>JavaScript Promises</h1>
    <div style="text-align: center;">
        <p>"I Promise a Result!"</p>

        <p> "Producing code" is code that can take some time</p>

        <p>"Consuming code" is code that must wait for the result</p>

        <p>A Promise is an Object that links Producing code and Consuming code</p>
    </div>
    <h1>Promise Object Properties</h1>
    <p>A JavaScript Promise object can be:</p>
    <ul>
        <li>Pending</li>
        <li>Fulfilled</li>
        <li>Rejected</li>
    </ul>
    <p>The Promise object supports two properties: state and result.</p>
    <p>While a Promise object is "pending" (working), the result is undefined.</p>
    <p>When a Promise object is "fulfilled", the result is a value.</p>
    <p>When a Promise object is "rejected", the result is an error object.</p>
    <table class="ws-table-all" border="1">
        <tbody>
            <tr>
                <th>myPromise.state</th>
                <th>myPromise.result</th>
            </tr>
            <tr>
                <td>"pending"</td>
                <td>undefined</td>
            </tr>
            <tr>
                <td>"fulfilled"</td>
                <td>a result value</td>
            </tr>
            <tr>
                <td>"rejected"</td>
                <td>an error object</td>
            </tr>
        </tbody>
    </table>
    <p>Syntax</p>
    <pre>
        let promise = new Promise(function(resolve, reject){
            //do something
       });
    </pre>
    <details>
        <summary>Example:This example shows how to create a basic promise object.</summary>
        <pre>
            let promise = new Promise(function (resolve, reject) {
                const x = "geeksforgeeks";
                const y = "geeksforgeeks"
                if (x === y) {
                    resolve();
                } else {
                    reject();
                }
            });
             
            promise.
                then(function () {
                    console.log('Success, You are a GEEK');
                }).
                catch(function () {
                    console.log('Some error has occurred');
                });
                //Output: Success, You are a GEEK
        </pre>
    </details>
    <h4>Parameters</h4>
    <ul>
        <li>The promise constructor takes only one argument which is a callback function</li>
        <li>The callback function takes two arguments, resolve and reject.</li>
        <li>The promise constructor takes only one argument which is a callback function
            <ul>
                <li>Perform operations inside the callback function and if everything went well then call resolve.</li>
                <li>If desired operations do not go well then call reject.</li>
            </ul>
        </li>
    </ul>
    <p><strong>Promise Consumers:</strong>Promises can be consumed by registering functions using .then and .catch
        methods.</p>
    <!-- Promise then() Method START -->
    <h3>Promise then() Method:</h3>
    <p>
        It is invoked when a promise is either resolved or rejected. It may also be defined as a carrier that takes data
        from promise and further executes it successfully.
    </p>
    <p><strong>Parameters:</strong>It takes two functions as parameters.</p>
    <ul>
        <li>The first function is executed if the promise is resolved and a result is received.</li>
        <li>The second function is executed if the promise is rejected and an error is received. It is optional and
            there is a better way to handle error using .catch() method</li>
    </ul>
    <p>Let us understand promises with an example. For suppose you ordered something on amazon. Your expected delivery date is extended. In this scenario, you would complain for your delayed delivery. They simply console you or give your promise that your order will be delivered in few days. Furthermore, You may get your product and promise will be fulfilled otherwise, it will be rejected and they would refund you the money.</p>
    <p>Syntax:</p>
    <pre>
        .then(function(result){
            //handle success
        }, function(error){
            //handle error
        })
    </pre>
    <details>
        <summary>Example2</summary>
        <p>This example shows how the then method handles when a promise is resolved</p>
        <pre>
            let promise = new Promise(function (resolve, reject) {
                resolve('Geeks For Geeks');
            })
             
            promise
                .then(function (successMessage) {
                    //success handler function is invoked 
                    console.log(successMessage);
                }, function (errorMessage) {
                    console.log(errorMessage);
                });
        </pre>
    </details>
    <p id="disp"></p>
    <!-- Promise then() Method END -->
    <script>
        // function myDisplayer(some) {
        //     document.getElementById("disp").innerHTML = some;
        // }
        // function myCalculator(sum1, sum2) {
        //     let sum = num1 + num2;
        //     return sum;
        //     myDisplayer(sum);
        // }
        // myCalculator(5, 5)

        // function myDisplayer(some){
        //     document.getElementById("disp").innerHTML = some;
        // }
        // function myCalculator(num1, num2, myCallback){
        //     let sum = num1 + num2;
        //     myCallback(sum);
        // }
        // myCalculator(5 , 5, myDisplayer);


        const myArray = [4, 5, -7, 8, -2, 9]
        const posNumbers = removeNeg(myArray, (x) => x >= 0);
        function removeNeg(numbers, callback) {
            const myArr = [];
            for (const x of numbers) {
                if (callback(x)) {
                    myArr.push(x);
                }
            }
            return myArr;

        }
        console.log(posNumbers);
    </script>

</body>

</html>